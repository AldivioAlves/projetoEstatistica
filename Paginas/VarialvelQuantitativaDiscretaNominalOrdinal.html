<html>

<head>
    <meta charset="uft8" />
</head>
<style type="text/css">
    #divQuartil,
    #divQuintil,
    #divPercentil,
    #divDecil {
        width: 200px;
        height: 100px;
        padding: 20px;
        margin-top: -18px;

        display: none
    }

    #Centro,
    #caixaDispersão {
        width: 200px;
        height: 100px;
        margin-top: -18px;
        padding: 20px;
        display: none
    }

    #divCanvas {


        width: 50%;
        height: 50%;
        display: none
    }

    #caixaMedidas {
        float: left;
        border: 2px solid black;
        width: 360px;
        height: 170px;
        padding-top: 0px;
        display: none
    }

    #caixaMedidas h4 {
        text-align: center;
    }

    #nav {
        list-style: none;
    }

    #nav li a {
        color: white;
        font-weight: bold;
    }

    #TQD_topo {
        background-color: #ccc
    }

    #TQD {
        margin-top: 2.3%;
        float: left;
        margin-right: 100px;
        text-align: center;
        
    }

    #TQD tr:nth-child(even) {
        background-color: #f0f0f0
    }

    #TQD tr:hover {
        background: #ddd;
    }

    #TQD th {
        width: 21.5%;
    }

    #selectCaixas {
        float: left;

    }

    #pSelecione {
        display: block;
        margin-bottom: 0px;
        margin-top: 0.5px;

    }

    #selecionado {
        float: left;
        margin-left: 10px;
        margin-top: 0px
    }

    #elementosFixos {
        float: left;
        margin-left: 10px
    }

    #resultadoQuartil,
    #resultadoQuintil,
    #resultadoDecil,
    #resultadoPercentil {
        text-align: center;
        font-weight: bold;
        text-shadow: 2px 0px 0px gray;
        margin-top: -15px;
        font-size: 60px
    }

    #paragrafoMedia,
    #paragrafoMediana,
    #paragrafoModa,
    #paragrafoDesvioPadrão,
    #paragrafoCoeficiente {
        font-weight: bold;
        font-size: 25px;
        margin-top: 0.3px;
        margin-bottom: 1px;
        text-shadow: 2px 0px 0px gray;

    }

    form {
        display: inline
    }

    #tabelaMedidasGrafico {
        margin-left: auto;
        margin-right: auto;
        margin-top: 50px;

        padding: 20px;
        width: 70%;
        height: 50%;
    }

    #botõesMostrar {
        margin-left: 650px;
        margin-right: auto;
        margin-top: 30px;

    }
</style>
<style href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.css"></style>
<LINK href="../bootstrap-4.1.3-dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">



<body>
    <div id="nav" class="navbar navbar-dark bg-primary navbar-expand-lg">
        <div class="container">
            <li><a href="home.html">HOME</a></li>
        </div>
    </div>
    <div id=botõesMostrar>
        <button id='MostrarTabela' onclick="mostrarElementos('tabela')">tabela</button>
        <button id='MostrarGrafico' onclick="mostrarElementos('grafico')">grafico</button>
        <button id='MostrarMedidas' onclick="mostrarElementos('medidas')">Medidias</button>
    </div>

    <div class="container">


        <br />
        <div id="tabelaMedidasGrafico">
            <table id="TQD">
                <tr id="TQD_topo">
                    <th id='nomeDaVariavel'>

                    </th>
                    <th>
                        F*
                    </th>
                    <th>
                        F.c
                    </th>
                    <th>
                        P*
                    </th>
                    <th>
                        P.c
                    </th>
                </tr>
            </table>

            <div id="divCanvas"><canvas id="graficoDiscreta"></canvas></div>

            <div id='caixaMedidas'>
                <h4>MEDIDAS</h4>
                <div id='elementosFixos'>

                    <select id="selectCaixas" onchange="plotarMedidas()">
                        <option>Selecione</option>
                        <option value="Centrais"> Centrais </option>
                        <option value="Quartil">Quartil</option>
                        <option value="Decil"> Decil</option>
                        <option value="Quintil"> Quintil </option>
                        <option value="Percentil"> Percentil</option>
                    </select>
                </div>
                <div id='selecionado'>

                    <div id="Centro"></div>

                    <div id='divQuartil'>
                        <p>Quartil:

                            <select id="selectQ" onchange="sepatatrizONQ('Q')">
                                <option>Selecione</option>
                                <option value="Q1"> Q<sub>1</sub> </option>
                                <option value="Q2"> Q<sub>2</sub> </option>
                                <option value="Q3"> Q<sub>3</sub> </option>
                                <option value="Q4"> Q<sub>4</sub> </option>
                            </select>

                        </p>


                        <p id="resultadoQuartil" class="ResulSeparatrizes"></p>
                    </div>


                    <div id='divQuintil'>
                        <p>Quintil:

                            <select id="selectK" onchange="sepatatrizONQ('K')">
                                <option>Selecione</option>
                                <option value="k1"> K<sub>1</sub> </option>
                                <option value="k2"> K<sub>2</sub> </option>
                                <option value="k3"> K<sub>3</sub> </option>
                                <option value="k4"> K<sub>4</sub> </option>
                                <option value="k5"> K<sub>5</sub> </option>
                            </select>

                        </p>
                        <p id="resultadoQuintil"></p>
                    </div>

                    <div id='divDecil'>
                        <p>Decil:

                            <select id="selectD" onchange="sepatatrizONQ('D')">
                                <option>Selecione</option>
                                <option value="D1"> D<sub>1</sub> </option>
                                <option value="D2"> D<sub>2</sub> </option>
                                <option value="D3"> D<sub>3</sub> </option>
                                <option value="D4"> D<sub>4</sub> </option>
                                <option value="D5"> D<sub>5</sub> </option>
                                <option value="D6"> D<sub>6</sub> </option>
                                <option value="D7"> D<sub>7</sub> </option>
                                <option value="D8"> D<sub>8</sub> </option>
                                <option value="D9"> D<sub>9</sub> </option>
                                <option value="D10"> D<sub>10</sub> </option>
                            </select>

                        </p>
                        <p id="resultadoDecil"></p>
                    </div>


                    <div id='divPercentil'>
                        <p>Percentil:

                            <input type="text" id="EntradaPercentil" size=5 onfocus="limpaSeparatriz('P')" />
                            <input type="button" onclick="sepatatrizONQ('P')" value="=" />
                        </p>

                        <p id="resultadoPercentil"></p>
                    </div>
                </div>
            </div>
        </div>



    </div>
</body>


<script src="../Scripts/OrdenaçãoVetorPrincipal.js"></script>
<script src="../Scripts/MedianaDiscretaNominalOrdinal.js"></script>
<script src="../Scripts/ModaDiscretaNominalOrdinal.js"></script>
<script src="../Scripts/mediaDiscreta.js"></script>
<script src="../Scripts/MedianaDiscretaNominalOrdinalversao2.js"></script>
<script src="../Scripts/DesvioPadrão&CoeficienteVariação.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.js"></script>
<script src="../Scripts/graficos.js"></script>
<script src="../Scripts/limpaSeparatrizes.js"></script>
<script src="../Scripts/SeparatrizONQ.js"></script>
<script src="../Scripts/cores.js"></script>
<script src="../Scripts/animar.js"></script>



<script type="text/javascript">

    

    animar('TQD','aparecer')
    


    mostrarElementos = function (x) {
        if (x == 'tabela') {

            document.getElementById('TQD').style.display = 'inline-block'
            animar('TQD','aparecer')
            document.getElementById('divCanvas').style.display = 'none'
            document.getElementById('caixaMedidas').style.display = 'none'
        }
        else if (x == 'grafico') {
            animar('divCanvas','aparecer')
            document.getElementById('TQD').style.display = 'none'
            document.getElementById('divCanvas').style.display = 'inline-block'

            document.getElementById('caixaMedidas').style.display = 'none'

        }
        else {
            animar('caixaMedidas','aparecer')
            document.getElementById('TQD').style.display = 'none'
            document.getElementById('divCanvas').style.display = 'none'
            document.getElementById('caixaMedidas').style.display = 'inline-block'
        }
    }





    objetoDadosUsuario = JSON.parse(window.localStorage.getItem('dadosFormulario'))
    document.getElementById('nomeDaVariavel').innerText = objetoDadosUsuario.nomeVar


    vetor = objetoDadosUsuario.vetorUsuario






    if (objetoDadosUsuario.Variavel == "Discreta") {
        for (i = 0; i < vetor.length; i++) {
            vetor[i] = parseFloat(vetor[i])
        }
    }


    vetor = InserçãoDireta(vetor)



    objeto = {}

    for (elemento = 0; elemento < vetor.length; elemento++) {
        if (String(vetor[elemento]) in objeto) {
            objeto[String(vetor[elemento])] += 1
        }
        else {
            objeto[String(vetor[elemento])] = 1

        }
    }
    //rotina de repetição que ordena o vetor a partir da ordem escolhida pelo usuário
    if (objetoDadosUsuario.Variavel == "Ordinal") {
        listaVetor = objetoDadosUsuario.OrdemVariaveis
        vetor = []

        for (i = 0; i < listaVetor.length; i++) {
            for (j = 0; j < objeto[listaVetor[i]]; j++) {
                vetor.push(listaVetor[i])
            }
        }
    }
    else {

        listaVetor = []
        for (chave in objeto) {
            listaVetor.push(chave)
        }
    }



    tabela = document.getElementById('TQD')
    acumuladorFrequenciaSimples = 0
    acumuladorPercentualSimples = 0
    vetorFrequenciaSimplesAcumulada = []

    frequenciaSimples = []
    for (chaves in objeto) {
        frequenciaSimples.push(objeto[chaves])
    }


    for (i = 0; i < listaVetor.length; i++) {

        linha = document.createElement('tr')
        linha.id = `linha${i + 1}`
        document.getElementById('TQD').appendChild(linha)

        NomedoElemento = document.createElement('td')
        NomedoElemento.id = `nome${i + 1}`
        document.getElementById(`linha${i + 1}`).appendChild(NomedoElemento)
        NomedoElemento.innerText = listaVetor[i]

        FreSimplesElemento = document.createElement('td')
        FreSimplesElemento.id = `FSE${i + 1}`
        document.getElementById(`linha${i + 1}`).appendChild(FreSimplesElemento)
        FreSimplesElemento.innerText = objeto[String(listaVetor[i])]

        acumuladorFrequenciaSimples += objeto[String(listaVetor[i])]


        FreSimplesAcumulada = document.createElement('td')
        FreSimplesAcumulada.id = `FSA${i + 1}`
        document.getElementById(`linha${i + 1}`).appendChild(FreSimplesAcumulada)
        FreSimplesAcumulada.innerText = acumuladorFrequenciaSimples
        vetorFrequenciaSimplesAcumulada.push(acumuladorFrequenciaSimples)


        calculoPerSimples = (100 * (objeto[String(listaVetor[i])])) / vetor.length
        percentualSimples = parseFloat(calculoPerSimples.toFixed(1))

        PerSimples = document.createElement('td')
        PerSimples.id = `PS${i + 1}`
        document.getElementById(`linha${i + 1}`).appendChild(PerSimples)
        PerSimples.innerText = percentualSimples + '%'

        acumuladorPercentualSimples += calculoPerSimples


        PerAcumulado = document.createElement('td')
        PerAcumulado.id = `PA${i + 1}`
        document.getElementById(`linha${i + 1}`).appendChild(PerAcumulado)
        PerAcumulado.innerText = acumuladorPercentualSimples.toFixed(1) + '%'
    }



    ParagrafoModa = document.createElement('p')
    ParagrafoModa.id = 'ParagrafoModa'
    document.getElementById('Centro').appendChild(ParagrafoModa)
    ParagrafoModa.innerText = 'Moda: ' + moda(objeto)


    if (objetoDadosUsuario.Variavel == "Discreta") {

        ParagrafoMedia = document.createElement('p')
        ParagrafoMedia.id = 'ParagrafoMedia'
        document.getElementById('Centro').appendChild(ParagrafoMedia)
        mediaFloat = media(objeto)
        ParagrafoMedia.innerText = 'Média: ' + parseFloat(mediaFloat.toFixed(2))
    }


    ParagrafoMediana = document.createElement('p')
    ParagrafoMediana.id = 'ParagrafoMediana'
    document.getElementById('Centro').appendChild(ParagrafoMediana)
    ParagrafoMediana.innerText = 'Mediana: ' + mediana()



    if (objetoDadosUsuario.Variavel == "Discreta") {

        CaixaMedDispersão = document.createElement('div')
        CaixaMedDispersão.id = 'caixaDispersão'
        document.getElementById('selecionado').appendChild(CaixaMedDispersão)


        ParagrafoDesvioPadrão = document.createElement('p')
        ParagrafoDesvioPadrão.id = 'ParagrafoDesvioPadrão'
        document.getElementById('caixaDispersão').appendChild(ParagrafoDesvioPadrão)
        ParagrafoDesvioPadrão.innerText = 'Desvio: ' + DesvioPadrão(objeto)

        ParagrafoCoeficiente = document.createElement('p')
        ParagrafoCoeficiente.id = "paragrafoCoeficiente"
        document.getElementById('caixaDispersão').appendChild(ParagrafoCoeficiente)
        ParagrafoCoeficiente.innerText = "CV: " + CoeficienteDeVariação()


    }
    if (objetoDadosUsuario.Variavel == 'Discreta') {
        opçãoParaDiscreta = document.getElementById('selectCaixas').insertBefore(document.createElement('option'), document.getElementById('selectCaixas').querySelectorAll('option')[2])
        opçãoParaDiscreta.innerText = 'Dispersão'
        opçãoParaDiscreta.setAttribute('value', 'dispersão')
    }

    graficoDiscreta()

    //document.getElementById('caixaMedidas').innerHTML=document.getElementById('divDecil').innerHTML

    plotarMedidas = function () {
        opção = document.getElementById('selectCaixas').value



        if (opção == 'Centrais') {
            if (objetoDadosUsuario.Variavel == 'Discreta') {
                document.getElementById('caixaDispersão').style.display = 'none'
            }


            document.getElementById('divQuartil').style.display = 'none'
            document.getElementById('divQuintil').style.display = 'none'
            document.getElementById('divPercentil').style.display = 'none'
            document.getElementById('divDecil').style.display = 'none'
            document.getElementById('Centro').style.display = 'inline-block'

        }
        else if (opção == 'dispersão') {
            if (objetoDadosUsuario.Variavel == 'Discreta') {
                document.getElementById('caixaDispersão').style.display = 'inline-block'
            }
            document.getElementById('divQuartil').style.display = 'none'
            document.getElementById('divQuintil').style.display = 'none'
            document.getElementById('divPercentil').style.display = 'none'
            document.getElementById('divDecil').style.display = 'none'
            document.getElementById('Centro').style.display = 'none'
        }
        else if (opção == 'Quartil') {
            if (objetoDadosUsuario.Variavel == 'Discreta') {
                document.getElementById('caixaDispersão').style.display = 'none'
            }
            document.getElementById('divQuartil').style.display = 'inline-block'
            document.getElementById('divQuintil').style.display = 'none'
            document.getElementById('divPercentil').style.display = 'none'
            document.getElementById('divDecil').style.display = 'none'
            document.getElementById('Centro').style.display = 'none'
        }
        else if (opção == 'Decil') {
            if (objetoDadosUsuario.Variavel == 'Discreta') {
                document.getElementById('caixaDispersão').style.display = 'none'
            }
            document.getElementById('divQuartil').style.display = 'none'
            document.getElementById('divQuintil').style.display = 'none'
            document.getElementById('divPercentil').style.display = 'none'
            document.getElementById('divDecil').style.display = 'inline-block'
            document.getElementById('Centro').style.display = 'none'
        }
        else if (opção == 'Quintil') {
            if (objetoDadosUsuario.Variavel == 'Discreta') {
                document.getElementById('caixaDispersão').style.display = 'none'
            }
            document.getElementById('divQuartil').style.display = 'none'
            document.getElementById('divQuintil').style.display = 'inline-block'
            document.getElementById('divPercentil').style.display = 'none'
            document.getElementById('divDecil').style.display = 'none'
            document.getElementById('Centro').style.display = 'none'
        }
        else if (opção == 'Percentil') {
            if (objetoDadosUsuario.Variavel == 'Discreta') {
                document.getElementById('caixaDispersão').style.display = 'none'
            }
            document.getElementById('divQuartil').style.display = 'none'
            document.getElementById('divQuintil').style.display = 'none'
            document.getElementById('divPercentil').style.display = 'inline-block'
            document.getElementById('divDecil').style.display = 'none'
            document.getElementById('Centro').style.display = 'none'
        }


    }

</script>


</html>